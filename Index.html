<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Adventure</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: white;
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .game-title {
            font-size: 3rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .main-area {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .character-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }
        
        .character-info h3 {
            color: #ffd700;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .stat-bar {
            margin-bottom: 10px;
        }
        
        .stat-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }
        
        .hp-bar { background: linear-gradient(90deg, #ff4757, #ff6b7a); }
        .mp-bar { background: linear-gradient(90deg, #3742fa, #5352ed); }
        .xp-bar { background: linear-gradient(90deg, #ffa502, #ff6348); }
        
        .location-info {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .location-name {
            font-size: 1.5rem;
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .game-content {
            min-height: 300px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .combat-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .character-card, .enemy-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        
        .character-avatar, .enemy-avatar {
            font-size: 4rem;
            margin-bottom: 10px;
        }
        
        .inventory {
            margin-top: 20px;
        }
        
        .inventory h4 {
            color: #ffd700;
            margin-bottom: 10px;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 5px;
        }
        
        .inventory-slot {
            aspect-ratio: 1;
            background: rgba(0,0,0,0.3);
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .inventory-slot:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .inventory-slot.has-item {
            background: rgba(255,215,0,0.2);
        }
        
        .message-log {
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .message {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 5px;
        }
        
        .message.combat { background: rgba(255,0,0,0.2); }
        .message.success { background: rgba(0,255,0,0.2); }
        .message.info { background: rgba(0,0,255,0.2); }
        
        .class-selection {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 40px;
            backdrop-filter: blur(10px);
            text-align: center;
        }
        
        .class-selection h2 {
            font-size: 2.5rem;
            margin-bottom: 30px;
            color: #ffd700;
        }
        
        .class-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }
        
        .class-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .class-card:hover {
            transform: translateY(-5px);
            border-color: #ffd700;
            box-shadow: 0 10px 30px rgba(255,215,0,0.3);
        }
        
        .class-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }
        
        .class-card h3 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: #ffd700;
        }
        
        .class-card p {
            margin-bottom: 20px;
            opacity: 0.9;
        }
        
        .class-card ul {
            list-style: none;
            text-align: left;
        }
        
        .class-card li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .class-card li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #4ade80;
        }
        
        .spell-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .spell-btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .spell-fire {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
        }
        
        .spell-ice {
            background: linear-gradient(45deg, #74b9ff, #0984e3);
            color: white;
        }
        
        .spell-lightning {
            background: linear-gradient(45deg, #fdcb6e, #e17055);
            color: white;
        }
        
        .item-quantity {
            position: absolute;
            bottom: 2px;
            right: 2px;
            background: rgba(255,215,0,0.8);
            color: black;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: 1fr;
            }
            
            .combat-area {
                grid-template-columns: 1fr;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .class-options {
                grid-template-columns: 1fr;
            }
            
            .spell-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">⚔️ RPG Adventure ⚔️</h1>
        </div>
        
        <!-- Menu de Seleção de Classe -->
        <div id="classSelection" class="class-selection">
            <div class="class-selection-content">
                <h2>Crie seu Personagem</h2>
                <div style="margin-bottom: 30px;">
                    <label for="playerName" style="display: block; margin-bottom: 10px; font-size: 1.2rem; color: #ffd700;">Nome do seu personagem:</label>
                    <input type="text" id="playerName" placeholder="Digite seu nome..." style="padding: 12px; font-size: 1.1rem; border-radius: 8px; border: none; width: 300px; max-width: 100%; text-align: center;">
                </div>
                <h3 style="margin-bottom: 20px;">Escolha sua Classe</h3>
                <div class="class-options">
                    <div class="class-card" onclick="selectClass('knight')">
                        <div class="class-icon">🛡️</div>
                        <h3>Cavaleiro</h3>
                        <p>Especialista em combate corpo a corpo</p>
                        <ul>
                            <li>+30 HP inicial</li>
                            <li>+5 Ataque</li>
                            <li>+3 Defesa</li>
                            <li>Habilidades de combate</li>
                        </ul>
                    </div>
                    <div class="class-card" onclick="selectClass('mage')">
                        <div class="class-icon">🧙‍♂️</div>
                        <h3>Mago</h3>
                        <p>Mestre das artes arcanas</p>
                        <ul>
                            <li>+50 MP inicial</li>
                            <li>Magias elementais</li>
                            <li>Regeneração de mana</li>
                            <li>Ataques à distância</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="game-board" id="gameBoard" style="display: none;">
            <div class="main-area">
                <div class="location-info">
                    <div class="location-name" id="locationName">Cidade Inicial</div>
                    <div id="locationDescription">Você está na praça central de uma pequena cidade. Aventureiros se reúnem aqui antes de partir para suas jornadas.</div>
                </div>
                
                <div class="game-content" id="gameContent">
                    <p>Bem-vindo ao RPG Adventure! Você é um jovem aventureiro pronto para explorar o mundo.</p>
                    <p>Use os botões abaixo para explorar, lutar contra monstros e melhorar seu personagem.</p>
                </div>
                
                <div class="action-buttons" id="actionButtons">
                    <button class="btn btn-primary" onclick="explore()">🗺️ Explorar</button>
                    <button class="btn btn-danger" onclick="findEnemy()">⚔️ Procurar Inimigo</button>
                    <button class="btn btn-success" onclick="rest()">🏠 Descansar</button>
                    <button class="btn btn-primary" onclick="shop()">🛒 Loja</button>
                </div>
                
                <div class="message-log" id="messageLog">
                    <div class="message info">Jogo iniciado! Boa sorte em sua aventura!</div>
                </div>
            </div>
            
            <div class="character-panel">
                <div class="character-info">
                    <h3><span id="playerEmoji">🧙‍♂️</span> <span id="playerNameDisplay">Seu Personagem</span></h3>
                    
                    <div class="stat-bar">
                        <div class="stat-label">
                            <span>Nível <span id="playerLevel">1</span></span>
                            <span id="playerClass">Aventureiro</span>
                        </div>
                    </div>
                    
                    <div class="stat-bar">
                        <div class="stat-label">
                            <span>HP</span>
                            <span><span id="currentHP">100</span>/<span id="maxHP">100</span></span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill hp-bar" id="hpBar" style="width: 100%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-bar">
                        <div class="stat-label">
                            <span>MP</span>
                            <span><span id="currentMP">50</span>/<span id="maxMP">50</span></span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill mp-bar" id="mpBar" style="width: 100%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-bar">
                        <div class="stat-label">
                            <span>XP</span>
                            <span><span id="currentXP">0</span>/<span id="xpToNext">100</span></span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill xp-bar" id="xpBar" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px;">
                        <div><strong>⚔️ Ataque:</strong> <span id="playerAttack">15</span></div>
                        <div><strong>🛡️ Defesa:</strong> <span id="playerDefense">10</span></div>
                        <div><strong>💰 Ouro:</strong> <span id="playerGold">50</span></div>
                    </div>
                </div>
                
                <div class="inventory">
                    <h4>🎒 Inventário</h4>
                    <div class="inventory-grid" id="inventoryGrid">
                        <!-- Inventário será preenchido dinamicamente -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Estado do jogo
        let gameState = {
            player: {
                level: 1,
                hp: 100,
                maxHP: 100,
                mp: 50,
                maxMP: 50,
                xp: 0,
                xpToNext: 100,
                attack: 15,
                defense: 10,
                gold: 50,
                class: null,
                classEmoji: '🧙‍♂️'
            },
            location: 'town',
            inCombat: false,
            currentEnemy: null,
            inventory: {
                potion: 3,
                sword: 1,
                manaPotion: 2
            }
        };

        // Classes de personagem
        const classes = {
            knight: {
                name: 'Cavaleiro',
                emoji: '🧔🏼',
                bonuses: { hp: 30, attack: 5, defense: 3, mp: 0 },
                spells: []
            },
            mage: {
                name: 'Mago',
                emoji: '🧙‍♂️',
                bonuses: { hp: 0, attack: 0, defense: 0, mp: 50 },
                spells: ['fireball', 'iceShard', 'lightning']
            }
        };

        // Magias
        const spells = {
            fireball: { name: 'Bola de Fogo', cost: 15, damage: [20, 30], emoji: '🔥' },
            iceShard: { name: 'Fragmento de Gelo', cost: 12, damage: [15, 25], emoji: '❄️' },
            lightning: { name: 'Raio', cost: 18, damage: [25, 35], emoji: '⚡' }
        };

        // Definições de inimigos expandidas
        const enemies = {
            goblin: { name: 'Goblin', hp: 40, attack: 12, defense: 5, xp: 25, gold: 15, emoji: '👹' },
            orc: { name: 'Orc', hp: 70, attack: 18, defense: 8, xp: 40, gold: 25, emoji: '👺' },
            skeleton: { name: 'Esqueleto', hp: 50, attack: 15, defense: 6, xp: 30, gold: 20, emoji: '💀' },
            zombie: { name: 'Zumbi', hp: 60, attack: 14, defense: 4, xp: 35, gold: 18, emoji: '🧟' },
            ghost: { name: 'Fantasma', hp: 45, attack: 16, defense: 2, xp: 40, gold: 30, emoji: '👻' },
            demon: { name: 'Demônio', hp: 90, attack: 22, defense: 10, xp: 60, gold: 40, emoji: '😈' },
            vampire: { name: 'Vampiro', hp: 80, attack: 20, defense: 8, xp: 55, gold: 35, emoji: '🧛' },
            werewolf: { name: 'Lobisomem', hp: 85, attack: 24, defense: 9, xp: 65, gold: 45, emoji: '🐺' },
            dragon: { name: 'Dragão Jovem', hp: 150, attack: 30, defense: 15, xp: 100, gold: 100, emoji: '🐉' },
            lich: { name: 'Lich', hp: 120, attack: 28, defense: 12, xp: 85, gold: 80, emoji: '☠️' },
            bandits: { name: 'Bandidos', hp: 65, attack: 16, defense: 7, xp: 45, gold: 35, emoji: '🏴‍☠️' }
        };

        // Localizações expandidas
        const locations = {
            town: {
                name: 'Cidade Inicial',
                description: 'Você está na praça central de uma pequena cidade. Aventureiros se reúnem aqui antes de partir para suas jornadas.',
                enemies: ['goblin', 'orc', 'bandits']
            },
            forest: {
                name: 'Floresta Sombria',
                description: 'Uma floresta densa onde criaturas perigosas se escondem entre as árvores.',
                enemies: ['goblin', 'orc', 'skeleton', 'zombie', 'bandits']
            },
            cave: {
                name: 'Caverna Misteriosa',
                description: 'Uma caverna escura que ecoa com sons estranhos vindos das profundezas.',
                enemies: ['skeleton', 'zombie', 'ghost', 'demon']
            },
            mountain: {
                name: 'Montanha Gelada',
                description: 'Picos nevados onde apenas os mais corajosos se aventuram.',
                enemies: ['vampire', 'werewolf', 'dragon', 'bandits']
            },
            cemetery: {
                name: 'Cemitério Assombrado',
                description: 'Um cemitério antigo onde os mortos não descansam em paz.',
                enemies: ['skeleton', 'zombie', 'ghost', 'vampire']
            },
            
dungeon: {
                name: 'Masmorra Profunda',
                description: 'Uma masmorra cheia de perigos e tesouros perdidos.',
                enemies: ['demon', 'lich', 'dragon', 'vampire']
            },
            swamp: {
                name: 'Pântano Tóxico',
                description: 'Um pântano venenoso habitado por criaturas corrompidas.',
                enemies: ['zombie', 'demon', 'ghost', 'werewolf', 'bandits']
            }
        };

// Itens da loja expandidos
        const shopItems = {
            potion: { name: 'Poção de Vida', price: 20, emoji: '🧪', description: 'Restaura 40 HP' },
            manaPotion: { name: 'Poção de Mana', price: 25, emoji: '🔮', description: 'Restaura 30 MP' },
            sword: { name: 'Espada Melhorada', price: 100, emoji: '⚔️', description: '+5 Ataque', effect: 'attack', value: 5 },
            shield: { name: 'Escudo de Ferro', price: 80, emoji: '🛡️', description: '+3 Defesa', effect: 'defense', value: 3 },
            armor: { name: 'Armadura de Couro', price: 150, emoji: '🦺', description: '+20 HP máximo', effect: 'maxHP', value: 20 },
magicSword: { name: 'Espada Mágica', price: 200, emoji: '🗡️', description: '+8 Ataque', effect: 'attack', value: 8 },
            dragonArmor: { name: 'Armadura de Dragão', price: 300, emoji: '🛡️', description: '+5 Defesa, +30 HP', effect: 'both', attack: 0, defense: 5, maxHP: 30 },
            magicRing: { name: 'Anel Mágico', price: 180, emoji: '💍', description: '+20 MP máximo', effect: 'maxMP', value: 20 },
            boots: { name: 'Botas de Velocidade', price: 120, emoji: '👢', description: '+2 Ataque, +1 Defesa', effect: 'both', attack: 2, defense: 1, maxHP: 0 }
        };

        function selectClass(classType) {
            const playerName = document.getElementById('playerName').value.trim();
if (!playerName) {
                alert('Por favor, digite um nome para seu personagem!');
                return;
            }
            
            const selectedClass = classes[classType];
            gameState.player.name = playerName;
            gameState.player.class = selectedClass.name;
            gameState.player.classEmoji = selectedClass.emoji;
            
            // Aplicar bônus da classe
            gameState.player.maxHP += selectedClass.bonuses.hp;
            gameState.player.hp += selectedClass.bonuses.hp;
            gameState.player.maxMP += selectedClass.bonuses.mp;
            gameState.player.mp += selectedClass.bonuses.mp;
            gameState.player.attack += selectedClass.bonuses.attack;
            gameState.player.defense += selectedClass.bonuses.defense;
// Esconder seleção de classe e mostrar jogo
            document.getElementById('classSelection').style.display = 'none';
            document.getElementById('gameBoard').style.display = 'grid';
            
            addMessage(`Bem-vindo, ${playerName}! Você escolheu a classe ${selectedClass.name}! Sua aventura começa agora!`, 'success');
            updateUI();
            updateInventoryDisplay();
        }

        function addMessage(text, type = 'info') {
            const messageLog = document.getElementById('messageLog');
            const message = document.createElement('div');
            message.className = `message ${type}`;
            message.textContent = text;
            messageLog.appendChild(message);
            messageLog.scrollTop = messageLog.scrollHeight;
        }
function updateInventoryDisplay() {
            const inventoryGrid = document.getElementById('inventoryGrid');
            inventoryGrid.innerHTML = '';
            
            // Criar 12 slots de inventário
            const items = Object.keys(gameState.inventory).filter(key => gameState.inventory[key] > 0);
            
            for (let i = 0; i < 12; i++) {
                const slot = document.createElement('div');
                slot.className = 'inventory-slot';
                slot.style.position = 'relative';
                if (i < items.length) {
                    const itemKey = items[i];
                    const item = shopItems[itemKey];
                    if (item && gameState.inventory[itemKey] > 0) {
                        slot.className += ' has-item';
                        slot.innerHTML = item.emoji;
                        slot.title = item.name;
                        slot.onclick = () => useItem(itemKey);
                        
                        // Adicionar quantidade se for maior que 1
                        if (gameState.inventory[itemKey] > 1) {
                            const quantity = document.createElement('div');
                            quantity.className = 'item-quantity';
                            quantity.textContent = gameState.inventory[itemKey];
                            slot.appendChild(quantity);
                        }
                    }
                }
function updateUI() {
            // Atualizar stats do jogador
            document.getElementById('playerLevel').textContent = gameState.player.level;
            document.getElementById('playerClass').textContent = gameState.player.class;
            document.getElementById('currentHP').textContent = gameState.player.hp;
            document.getElementById('maxHP').textContent = gameState.player.maxHP;
            document.getElementById('currentMP').textContent = gameState.player.mp;
            document.getElementById('maxMP').textContent = gameState.player.maxMP;
            document.getElementById('currentXP').textContent = gameState.player.xp;
document.getElementById('xpToNext').textContent = gameState.player.xpToNext;
            document.getElementById('playerAttack').textContent = gameState.player.attack;
            document.getElementById('playerDefense').textContent = gameState.player.defense;
            document.getElementById('playerGold').textContent = gameState.player.gold;
            
            // Atualizar nome e emoji do personagem
            if (gameState.player.name) {
                document.getElementById('playerNameDisplay').textContent = gameState.player.name;
            }
            if (gameState.player.classEmoji) {
                document.getElementById('playerEmoji').textContent = gameState.player.classEmoji;
            }
// Atualizar barras de progresso
            const hpPercent = (gameState.player.hp / gameState.player.maxHP) * 100;
            const mpPercent = (gameState.player.mp / gameState.player.maxMP) * 100;
            const xpPercent = (gameState.player.xp / gameState.player.xpToNext) * 100;

            document.getElementById('hpBar').style.width = hpPercent + '%';
            document.getElementById('mpBar').style.width = mpPercent + '%';
            document.getElementById('xpBar').style.width = xpPercent + '%';

            // Atualizar localização
            const location = locations[gameState.location];
            document.getElementById('locationName').textContent = location.name;
            document.getElementById('locationDescription').textContent = location.description;
        }
function explore() {
            // Chance de 15% de cair em armadilha
            if (Math.random() < 0.15) {
                triggerTrap();
                return;
            }

            const locationKeys = Object.keys(locations);
            const randomLocation = locationKeys[Math.floor(Math.random() * locationKeys.length)];
            gameState.location = randomLocation;

            const events = [
                'Você encontrou uma pequena quantia de ouro!',
                'Você descobriu uma poção escondida!',
                'Você encontrou um local seguro para descansar.',
                'Você ouviu ruídos estranhos na distância...',
                'Você encontrou pegadas de criaturas desconhecidas.'
            ];
const randomEvent = events[Math.floor(Math.random() * events.length)];
            
            if (randomEvent.includes('ouro')) {
                const goldFound = Math.floor(Math.random() * 20) + 5;
                gameState.player.gold += goldFound;
                addMessage(`Você encontrou ${goldFound} moedas de ouro!`, 'success');
            } else if (randomEvent.includes('poção')) {
                addMessage('Você encontrou uma poção de vida!', 'success');
                // Adicionar poção ao inventário se houver espaço
                const emptySlot = gameState.inventory.indexOf(null);
                if (emptySlot !== -1) {
                    gameState.inventory[emptySlot] = 'potion';
                }
            } else {
                addMessage(randomEvent, 'info');
            }
document.getElementById('gameContent').innerHTML = `
                <p>Você explorou uma nova área e descobriu: <strong>${locations[randomLocation].name}</strong></p>
                <p>${randomEvent}</p>
                <p>Continue explorando ou procure por inimigos para ganhar experiência!</p>
            `;

            updateUI();
        }

        function findEnemy() {
            // Chance de 10% de cair em armadilha ao procurar inimigos
            if (Math.random() < 0.10) {
                triggerTrap();
                return;
            }
const currentLocation = locations[gameState.location];
            const possibleEnemies = currentLocation.enemies;
            const randomEnemyKey = possibleEnemies[Math.floor(Math.random() * possibleEnemies.length)];
            const enemy = { ...enemies[randomEnemyKey] };
            
            gameState.currentEnemy = enemy;
            gameState.inCombat = true;

            startCombat();
        }
function triggerTrap() {
            const traps = [
                {
                    name: 'Poço Oculto',
                    emoji: '🕳️',
                    damage: [10, 20],
                    description: 'Você caiu em um poço disfarçado!'
                },
                {
                    name: 'Dardos Venenosos',
                    emoji: '🏹',
                    damage: [8, 15],
                    description: 'Dardos venenosos foram disparados das paredes!'
                },
                {
                    name: 'Pedra Rolante',
                    emoji: '🪨',
                    damage: [15, 25],
                    description: 'Uma pedra gigante rolou em sua direção!'
                },
                {
                    name: 'Espinhos no Chão',
                    emoji: '🌵',
                    damage: [5, 12],
                    description: 'Você pisou em espinhos afiados escondidos!'
                },
                {
                    name: 'Gás Tóxico',
                    emoji: '☠️',
                    damage: [12, 18],
                    description: 'Você inalou um gás tóxico!'
                }
            ];
const randomTrap = traps[Math.floor(Math.random() * traps.length)];
            const damage = Math.floor(Math.random() * (randomTrap.damage[1] - randomTrap.damage[0] + 1)) + randomTrap.damage[0];
            
            gameState.player.hp = Math.max(1, gameState.player.hp - damage);

            document.getElementById('gameContent').innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <div style="font-size: 5rem; margin-bottom: 20px;">${randomTrap.emoji}</div>
                    <h3 style="color: #ff4757; margin-bottom: 15px;">ARMADILHA!</h3>
                    <h4>${randomTrap.name}</h4>
<p style="margin: 20px 0;">${randomTrap.description}</p>
                    <p style="color: #ff6b7a; font-weight: bold;">Você perdeu ${damage} HP!</p>
                    ${gameState.player.hp <= 1 ? '<p style="color: #ffa502;">Você está gravemente ferido!</p>' : ''}
                </div>
            `;

            addMessage(`Você ativou uma armadilha: ${randomTrap.name}! Perdeu ${damage} HP.`, 'combat');
            
            if (gameState.player.hp <= 1) {
                addMessage('Você está gravemente ferido! Procure um local para descansar.', 'combat');
            }

            updateUI();
        }
function startCombat() {
            const enemy = gameState.currentEnemy;
            
            document.getElementById('gameContent').innerHTML = `
                <div class="combat-area">
                    <div class="character-card">
                        <div class="character-avatar">🧙‍♂️</div>
                        <h3>Você</h3>
                        <div>HP: ${gameState.player.hp}/${gameState.player.maxHP}</div>
                        <div>Ataque: ${gameState.player.attack}</div>
                        <div>Defesa: ${gameState.player.defense}</div>
                    </div>
                    <div class="enemy-card">
                        <div class="enemy-avatar">${enemy.emoji}</div>
                        <h3>${enemy.name}</h3>
<div>HP: ${enemy.hp}</div>
                        <div>Ataque: ${enemy.attack}</div>
                        <div>Defesa: ${enemy.defense}</div>
                    </div>
                </div>
                <p>Um ${enemy.name} selvagem apareceu! Prepare-se para a batalha!</p>
            `;

            let combatButtons = `
                <button class="btn btn-danger" onclick="attack()">⚔️ Atacar</button>
                <button class="btn btn-primary" onclick="useItem('potion')">🧪 Usar Poção</button>
                <button class="btn btn-success" onclick="defend()">🛡️ Defender</button>
                <button class="btn btn-primary" onclick="flee()">🏃‍♂️ Fugir</button>
            `;
            // Adicionar magias se for mago
            if (gameState.player.class === 'Mago') {
                combatButtons += `
                    <div class="spell-buttons" style="grid-column: 1 / -1;">
                        <button class="spell-btn spell-fire" onclick="castSpell('fireball')">🔥 Bola de Fogo (15 MP)</button>
                        <button class="spell-btn spell-ice" onclick="castSpell('iceShard')">❄️ Fragmento de Gelo (12 MP)</button>
                        <button class="spell-btn spell-lightning" onclick="castSpell('lightning')">⚡ Raio (18 MP)</button>
                    </div>
                `;
            }
document.getElementById('actionButtons').innerHTML = combatButtons;

            addMessage(`Combate iniciado contra ${enemy.name}!`, 'combat');
        }

        function attack() {
            const enemy = gameState.currentEnemy;
            const damage = Math.max(1, gameState.player.attack - enemy.defense + Math.floor(Math.random() * 10) - 5);
            
            enemy.hp -= damage;
            addMessage(`Você causou ${damage} de dano ao ${enemy.name}!`, 'combat');

            if (enemy.hp <= 0) {
                victory();
                return;
            }

            enemyAttack();
        }
function enemyAttack() {
            const enemy = gameState.currentEnemy;
            const damage = Math.max(1, enemy.attack - gameState.player.defense + Math.floor(Math.random() * 8) - 4);
            
            gameState.player.hp -= damage;
            addMessage(`${enemy.name} causou ${damage} de dano em você!`, 'combat');

            if (gameState.player.hp <= 0) {
                defeat();
                return;
            }

            updateUI();
            updateCombatDisplay();
        }
function updateCombatDisplay() {
            const enemy = gameState.currentEnemy;
            document.getElementById('gameContent').innerHTML = `
                <div class="combat-area">
                    <div class="character-card">
                        <div class="character-avatar">${gameState.player.classEmoji || '🧙‍♂️'}</div>
                        <h3>${gameState.player.name || 'Você'}</h3>
                        <div>HP: ${gameState.player.hp}/${gameState.player.maxHP}</div>
                        <div>Ataque: ${gameState.player.attack}</div>
                        <div>Defesa: ${gameState.player.defense}</div>
                    </div>
                    <div class="enemy-card">
                        <div class="enemy-avatar">${enemy.emoji}</div>
                        <h3>${enemy.name}</h3>
<div>HP: ${enemy.hp}</div>
                        <div>Ataque: ${enemy.attack}</div>
                        <div>Defesa: ${enemy.defense}</div>
                    </div>
                </div>
                <p>A batalha continua! Escolha sua próxima ação.</p>
            `;
        }
function castSpell(spellType) {
            const spell = spells[spellType];
            
            if (gameState.player.mp < spell.cost) {
                addMessage('Você não tem mana suficiente!', 'info');
                return;
            }
gameState.player.mp -= spell.cost;
            
            const enemy = gameState.currentEnemy;
            const damage = Math.floor(Math.random() * (spell.damage[1] - spell.damage[0] + 1)) + spell.damage[0];
            const finalDamage = Math.max(1, damage - enemy.defense);
            
            enemy.hp -= finalDamage;
            addMessage(`Você lançou ${spell.name} e causou ${finalDamage} de dano!`, 'combat');

            if (enemy.hp <= 0) {
                victory();
                return;
            }

            enemyAttack();
        }
function useItem(itemType) {
            if (!gameState.inventory[itemType] || gameState.inventory[itemType] <= 0) {
                addMessage(`Você não tem ${shopItems[itemType]?.name || itemType}!`, 'info');
                return;
            }

            if (itemType === 'potion') {
                const healAmount = 40;
                gameState.player.hp = Math.min(gameState.player.maxHP, gameState.player.hp + healAmount);
gameState.inventory[itemType]--;
                addMessage(`Você usou uma poção e recuperou ${healAmount} HP!`, 'success');
            } else if (itemType === 'manaPotion') {
                const manaAmount = 30;
                gameState.player.mp = Math.min(gameState.player.maxMP, gameState.player.mp + manaAmount);
                gameState.inventory[itemType]--;
                addMessage(`Você usou uma poção de mana e recuperou ${manaAmount} MP!`, 'success');
            }
            
            updateUI();
            updateInventoryDisplay();
            
            if (gameState.inCombat) {
                enemyAttack();
            }
        }
function defend() {
            addMessage('Você se defendeu e reduziu o dano do próximo ataque!', 'info');
            
            const enemy = gameState.currentEnemy;
            const damage = Math.max(1, Math.floor((enemy.attack - gameState.player.defense) / 2));
            
            gameState.player.hp -= damage;
            addMessage(`${enemy.name} causou apenas ${damage} de dano devido à sua defesa!`, 'combat');

            if (gameState.player.hp <= 0) {
                defeat();
                return;
            }

            updateUI();
            updateCombatDisplay();
        }
function flee() {
            const fleeChance = Math.random();
            if (fleeChance > 0.3) {
                addMessage('Você fugiu com sucesso!', 'success');
                endCombat();
            } else {
                addMessage('Você não conseguiu fugir!', 'combat');
                enemyAttack();
            }
        }

        function victory() {
            const enemy = gameState.currentEnemy;
            gameState.player.xp += enemy.xp;
            gameState.player.gold += enemy.gold;

            addMessage(`Você derrotou o ${enemy.name}!`, 'success');
            addMessage(`Ganhou ${enemy.xp} XP e ${enemy.gold} moedas de ouro!`, 'success');

            checkLevelUp();
            endCombat();
        }
function defeat() {
            gameState.player.hp = 1;
            gameState.player.gold = Math.max(0, gameState.player.gold - 20);
            
            addMessage('Você foi derrotado! Perdeu 20 moedas de ouro.', 'combat');
            addMessage('Você foi levado de volta à cidade para se recuperar.', 'info');
            
            gameState.location = 'town';
            endCombat();
        }
function checkLevelUp() {
            if (gameState.player.xp >= gameState.player.xpToNext) {
                gameState.player.level++;
                gameState.player.xp -= gameState.player.xpToNext;
                gameState.player.xpToNext = gameState.player.level * 100;
                
                // Aumentar stats
                gameState.player.maxHP += 20;
                gameState.player.hp = gameState.player.maxHP;
                gameState.player.maxMP += 10;
                gameState.player.mp = gameState.player.maxMP;
                gameState.player.attack += 3;
                gameState.player.defense += 2;

                addMessage(`Parabéns! Você subiu para o nível ${gameState.player.level}!`, 'success');
                addMessage('Seus atributos aumentaram!', 'success');
            }
        }
function endCombat() {
            gameState.inCombat = false;
            gameState.currentEnemy = null;

            document.getElementById('gameContent').innerHTML = `
                <p>O combate terminou. Você está de volta à exploração.</p>
                <p>Use os botões abaixo para continuar sua aventura!</p>
            `;
document.getElementById('actionButtons').innerHTML = `
                <button class="btn btn-primary" onclick="explore()">🗺️ Explorar</button>
                <button class="btn btn-danger" onclick="findEnemy()">⚔️ Procurar Inimigo</button>
                <button class="btn btn-success" onclick="rest()">🏠 Descansar</button>
                <button class="btn btn-primary" onclick="shop()">🛒 Loja</button>
            `;

            updateUI();
        }
function rest() {
            const hpRestored = Math.min(gameState.player.maxHP - gameState.player.hp, 50);
            const mpRestored = Math.min(gameState.player.maxMP - gameState.player.mp, 30);
            
            gameState.player.hp += hpRestored;
            gameState.player.mp += mpRestored;
document.getElementById('gameContent').innerHTML = `
                <p>Você descansou em um local seguro.</p>
                <p>HP restaurado: ${hpRestored}</p>
                <p>MP restaurado: ${mpRestored}</p>
                <p>Você se sente revigorado e pronto para continuar!</p>
            `;

            addMessage(`Você descansou e recuperou ${hpRestored} HP e ${mpRestored} MP.`, 'success');
            updateUI();
        }
function shop() {
            let shopHTML = `
                <h3>🛒 Loja do Aventureiro</h3>
                <p>Bem-vindo à loja! Aqui você pode comprar itens úteis para sua jornada.</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
            `;
Object.keys(shopItems).forEach(itemKey => {
                const item = shopItems[itemKey];
                shopHTML += `
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px;">
                        <div style="font-size: 2rem; text-align: center;">${item.emoji}</div>
                        <h4>${item.name}</h4>
                        <p>${item.description}</p>
                        <p><strong>Preço: ${item.price} ouro</strong></p>
                        <button class="btn btn-success" onclick="buyItem('${itemKey}')" style="width: 100%; margin-top: 10px;">Comprar</button>
                    </div>
                `;
            });
shopHTML += '</div>';
            document.getElementById('gameContent').innerHTML = shopHTML;
        }

        function buyItem(itemType) {
            const item = shopItems[itemType];
            
            if (gameState.player.gold < item.price) {
                addMessage('Você não tem ouro suficiente!', 'info');
                return;
            }

            gameState.player.gold -= item.price;
// Adicionar ao inventário
            if (gameState.inventory[itemType]) {
                gameState.inventory[itemType]++;
            } else {
                gameState.inventory[itemType] = 1;
            }
// Aplicar efeitos permanentes do item (equipamentos são equipados automaticamente)
            if (item.effect) {
                if (item.effect === 'attack') {
                    gameState.player.attack += item.value;
                    gameState.inventory[itemType] = 0; // Remove item permanente do inventário
                    addMessage(`${item.name} foi equipado! +${item.value} Ataque`, 'success');
} else if (item.effect === 'defense') {
                    gameState.player.defense += item.value;
                    gameState.inventory[itemType] = 0; // Remove item permanente do inventário
                    addMessage(`${item.name} foi equipado! +${item.value} Defesa`, 'success');
                } else if (item.effect === 'maxHP') {
                    gameState.player.maxHP += item.value;
                    gameState.player.hp += item.value;
gameState.inventory[itemType] = 0; // Remove item permanente do inventário
                    addMessage(`${item.name} foi equipado! +${item.value} HP máximo`, 'success');
                } else if (item.effect === 'maxMP') {
                    gameState.player.maxMP += item.value;
                    gameState.player.mp += item.value;
                    gameState.inventory[itemType] = 0; // Remove item permanente do inventário
                    addMessage(`${item.name} foi equipado! +${item.value} MP máximo`, 'success');
} else if (item.effect === 'both') {
                    gameState.player.attack += item.attack;
                    gameState.player.defense += item.defense;
                    gameState.player.maxHP += item.maxHP;
                    gameState.player.hp += item.maxHP;
                    gameState.inventory[itemType] = 0; // Remove item permanente do inventário
                    addMessage(`${item.name} foi equipado! Múltiplos bônus aplicados`, 'success');
                }
            }
addMessage(`Você comprou ${item.name} por ${item.price} ouro!`, 'success');
            updateUI();
            updateInventoryDisplay();
        }

        // Inicializar o jogo - aguardar seleção de classe
    </script>
</body>
</html>
